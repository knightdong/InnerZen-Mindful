# ZenInAffirmations 需求文档

## 1. 产品概述

### 1.1 产品定位
本应用旨在通过正向语录、个性化推荐和录音记录，帮助用户进行正向练习和情绪管理。用户不仅可以阅读金句，还能大声朗读、录制自己的语音，并通过每日打卡、情绪日记及数据报告看到自己的成长变化，同时获得个性化的励志推荐和定时提醒，形成持续的正向暗示和心理建设。

### 1.2 目标用户
- 渴望提升自信、感恩、勇气等正向心态的人群
- 希望通过语音录制和打卡记录自我成长的人
- 有情绪管理和情绪日记需求的用户

## 2. 主要功能模块

### 2.1 个性化语录推荐
**描述**：基于用户选择的正向主题（如自信、感恩、勇气等），从本地数据源获取对应分类的语录进行推荐。应用内置9大分类共500多条正向语录。

**页面**：主页/推荐页

**关键点**：
- 用户在设置中选择自己关注的主题
- 推荐系统根据主题匹配并从本地数据源中展示对应语录
- 支持语录收藏和分享功能

### 2.2 语音录制与回放
**描述**：用户不仅可以朗读系统推荐的金句，还可以录制自己的正向金句或上传背景音乐。录音在后续展示时自动回放。

**页面**：语录详情页、录音编辑页

**关键点**：
- 录音提示设置（录制金句或上传背景音乐）
- 支持录音编辑和剪辑功能
- 用户可在语录详情页中触发自动回放自己之前录制的版本

### 2.3 每日打卡功能
**描述**：提供打卡页面记录用户每日正向练习，连续打卡奖励、成就徽章及日历统计。

**页面**：打卡记录页、成就展示页

**关键点**：
- 日历视图显示打卡情况
- 根据连续打卡天数发放奖励徽章
- 支持打卡备注和心情记录

### 2.4 数据可视化报告
**描述**：基于用户录音、情绪日记等数据，生成成长曲线和统计图表，让用户看到自我进步。

**页面**：数据报告页

**关键点**：
- 语音录音频率、时长数据统计
- 用户情绪变化趋势图（语音和文字记录结合）
- 支持报告导出和分享

### 2.5 情绪日记
**描述**：录音后自动弹出情绪日记输入提示，允许用户用文字描述当时心情，实现语音和文字的双重记录。

**页面**：情绪日记编辑页、历史日记列表

**关键点**：
- 录音结束后提示"记录此刻的心情"
- 用户可添加文字、图片等内容记录情绪状态
- 支持日记标签和搜索功能

### 2.6 定时提醒与日常激励
**描述**：用户可设置每日正向练习提醒，并基于使用习惯自动推送每日励志语录和小贴士。

**页面**：设置页、提醒管理页、每日激励展示页

**关键点**：
- 用户自定义提醒时间（如晨间、午后、晚间）
- 自动生成的每日励志内容，结合用户使用数据进行推荐
- 支持提醒自定义和推送设置

## 3. 技术需求

### 3.1 前端开发
- 使用 Swift 编程，避免使用 SwiftUI
- 支持 iOS 15.4 及以上版本
- 使用 CocoaPods 进行依赖管理

### 3.2 核心功能实现
- 语音录制与回放：使用 AVFoundation 框架
- 数据存储：使用 CoreData 或 SQLite
- 网络请求：使用 Alamofire 和 Moya（用于用户数据同步，非必要）
- 图片加载：使用 Kingfisher
- 界面布局：使用 SnapKit
- 数据加密：使用 SwiftyRSA 和 KeychainAccess

### 3.3 数据管理
- 使用本地 JSON 文件存储语录数据，包含 9 大分类共 500 多条语录
  - 分类包括：blessing (78条)、beauty (77条)、sleep (64条)、gratitude (64条)、spiritual (55条)、love (51条)、money (49条)、happiness (38条)、health (37条)
- 数据结构采用两层结构：第一层为分类，第二层为句子
- 支持用户数据同步和备份
- 实现推送通知服务

### 3.4 数据安全
- 用户数据加密存储
- 支持 OAuth 或第三方登录
- 实现隐私政策与数据使用说明

## 4. 版本迭代规划

### 4.1 第一版（MVP）
- 语录推荐（从本地数据源读取）与朗读录音
- 录音录制与自定义提示设置
- 每日打卡记录与成就徽章展示
- 情绪日记录入（文字+语音记录）
- 定时提醒设置与每日励志语录推送

### 4.2 后续版本
- 数据可视化报告功能完善
- 更高级的情绪分析与反馈
- 社交分享功能，用户之间可以交流经验
- 多语言支持与个性化定制推荐算法优化
- 在线数据同步（可选）

## 5. 项目依赖
当前项目已集成以下主要依赖：
- Alamofire：网络请求（用于用户数据同步，非必要）
- Moya：网络抽象层（用于用户数据同步，非必要）
- Kingfisher：图片加载
- ProgressHUD：进度提示
- IQKeyboardManager：键盘管理
- lottie-ios：动画效果
- KeychainAccess：钥匙串访问
- SwiftyJSON：JSON 解析
- SnapKit：自动布局
- SwiftyRSA：RSA 加密
- MJRefresh：下拉刷新

## 6. 本地数据源结构

本应用使用本地 JSON 文件作为语录数据源，结构如下：

```json
{
  "blessing": [
    "每一天都充满无限可能，我以积极的心态迎接新的一天。",
    "我相信自己的能力，我有信心克服一切困难。",
    // 更多祝福类语录...
  ],
  "beauty": [
    "我接受并爱护我的身体，我认可自己内在和外在的美丽。",
    "我的美丽来自内心的自信和光芒。",
    // 更多美丽类语录...
  ],
  "sleep": [
    "我允许自己放松，迎接香甜的睡眠。",
    "我释放今天的所有压力，让平静和宁静包围我。",
    // 更多睡眠类语录...
  ],
  // 其他分类...
}
``` 